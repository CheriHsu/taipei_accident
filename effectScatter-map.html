<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>台北市交通事故統計</title>

    <meta charset="utf-8">
    <script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.css' rel='stylesheet' />

    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.3.0/mapbox-gl-geocoder.min.js'></script>
    <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.3.0/mapbox-gl-geocoder.css' type='text/css' />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>


    <script src="https://use.typekit.net/dli0dtt.js"></script> <!-- font-family -->
    <script>try{Typekit.load({ async: true });}catch(e){}</script> <!-- font-family -->

    <style>
        body { 
            margin:0; 
            padding:0; 
            font-family:"source-han-sans-traditional", arial, 微軟正黑體, Microsoft JhengHei,sans-serif;
            /* background-color: #444342; */
            }
        p{
            font-size: 14px;
        }
        #map { 
            position:absolute; 
            top:0; 
            bottom:0; 
            width:75%;
            height: 100%;
            float: left;
        }

        h1 {
            font-size: 20px;
            line-height: 30px;
        }

        h2 {
            font-size: 14px;
            line-height: 20px;
            margin-bottom: 10px;
        }

        a {
            text-decoration: none;
            color: #2dc4b2;
        }

        #console {
            position: absolute;
            width: 240px;
            margin: 10px;
            padding: 10px 20px;
            background-color: white;
        }

        .session {
            margin-bottom: 20px;
        }

        .row {
            height: 12px;
            width: 100%;
        }

        .colors {
            background: linear-gradient(to right, #2dc4b2, #3bb3c3, #669ec4, #8b88b6, #a2719b, #aa5e79);
            margin-bottom: 5px;
        }

        .label {
            width: 14%;
            display: inline-block;
            text-align: center;
        }

        /* menu */
        #menu {
            background: #fff;
            padding: 10px 40px 20px;
            /* position: absolute; */
            z-index: 1;
            top: 10px;
            right: 10px;
            /* border-radius: 3px; */
            /* width: 120px; */
            /* border: 1px solid rgba(0,0,0,0.4); */
            font-family: 'Open Sans', sans-serif;
        }

        #menu a {
            font-size: 13px;
            color: #404040;
            /* display: block; */
            margin: 5px;
            padding: 0;
            padding: 10px;
            text-decoration: none;
            border-bottom: 1px solid rgba(0,0,0,0.25);
            text-align: center;
            border-radius: 3px;
        }

        #menu a:last-child {
            border: none;
        }

        #menu a:hover {
            background-color: #f8f8f8;
            color: #404040;
        }

        #menu a.active {
            background-color: #3887be;
            color: #ffffff;
        }

        #menu a.active:hover {
            background: #3074a4;
        }
        
        /* search input */
        .geocoder {
            position:absolute;
            z-index:1;
            width:50%;
            left:50%;
            margin-left:-25%;
            top:20px;
        }
        /* .mapboxgl-ctrl-geocoder { min-width:100%; } */

        /* chartjs */
        section{
            width: 22%;
            text-align: center;
            font-size: 14px;
            float: right;
            padding: 10px;
            /* color:#fff; */
        }
        .wrapper{
            width: 1200px;
            margin-left: auto;
            margin-right: auto;
            position: relative;
            font-family: "Noto Sans TC","Microsoft JhengHei UI","Microsoft JhengHei";
            }
        .style1{
            margin: 5% 0 8%;
        }
        .style2{
            margin: 0 0 5%;
        }
        @media (max-width: 1200px){
            .wrapper{
            width: 100%;
            }
        }

        .right_section{
            font-weight: 900;
            height: 100vh;
            float: right;
        }

        .title{
            font-weight: 900;
            height: 100%;
        }

        #accident_position_row, #age_gander_row{
            width: 100%;
            float: left;
        }
        .box{
            padding: 10px;
        }
    </style>
</head>

<body style="height: 100%; margin: 0">
    <!-- 台北市交通事故統計 -->
    <div id="map"></div>
    <div id='geocoder' class='geocoder'></div>
    <div id='console'>
        <!-- vehicle collisions -->
        <h1>台北市交通事故統計<br>Traffic Accidents in Taipei City</h1>
        <p>Data: <a href='https://data.gov.tw/dataset/73925'>
            Vehicles collision injuries and deaths交通事故資料來源</a> ,<br>2014 - 2016
        </p>

        <!-- menu -->
        <h2>顯示 Display:</h2>
        <nav id="menu">
            <!-- append
            <a href="#" class="active">Heatmap</a>
            <a href="#" class="active">Point</a> 
            -->
        </nav>

        <!-- labels -->
        <div class='session'>
            <h2>Casualty 死傷人數</h2>
            <div class='row colors'>
            </div>
            <div class='row labels'>
                <div class='label'>0</div>
                <div class='label'>1</div>
                <div class='label'>2</div>
                <div class='label'>3</div>
                <div class='label'>4</div>
                <div class='label'>5+</div>
            </div>
        </div>

        <!-- sliderbar -->
        <div class='session' id='sliderbar'>
            <h2>發生時辰 Hour: <label id='active-hour'>12PM</label></h2>
            <input id='slider' class='row' type='range' min='0' max='23' step='1' value='12' />
        </div>
    </div>

	<section class="right_section">
        <span>2014-2016 Traffic accident rate<br>交通事故率</span>

        <p style="text-align: left;">年度受傷人數</p>
		<canvas class="style1" id="injured"></canvas>
        <p style="text-align: left;">年度死亡人數</p>
        <canvas class="style2" id="death"></canvas>
        
	</section>
    <section id="accident_position_row">
        <!-- 天氣 -->
        <!-- <div id="weather_dom" style="width: 47%; height: 400px; float: left;"></div>  -->

        <!-- 事故道路型態比例 -->
        <div id="pie_dom" style="width: 47%; height: 400px; float: left;"></div> 

        <!-- 汽機車死亡人數 -->
        <div id="container" style="width: 47%; height: 400px; float: left;"></div>
    </section>
    <section id="age_gander_row">
        <div class="title">年度男女年齡事故比例</div>
        <div class="box" id="box" style="width: 47%; height: 400px; float: left"></div>
        <div class="box" id="box2" style="width: 47%; height: 400px; float: left"></div>
        <div class="box" id="box3" style="width: 47%; height: 400px; float: left"></div>
        <div class="box" id="box4" style="width: 47%; height: 400px; float: left"></div>
    </section>

    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiY2hlcmloc3UiLCJhIjoiY2puemxzM2M4MTBoMTNrcXB2OW53bTZlYyJ9.dGOT6ydOwADgu2qMaCQWTw';
        $( document ).ready(function() {
            
            var map = new mapboxgl.Map({
                container: 'map', // map id
                // style: 'mapbox://styles/mapbox/streets-v9',
                // style: 'mapbox://styles/mapbox/light-v9',
                style: 'mapbox://styles/mapbox/dark-v9',
                center: [121.602152, 25.048374], // starting position
                zoom: 13,// zoom: 2 // starting zoom
                localIdeographFontFamily: "'Noto Sans', 'Noto Sans CJK SC', sans-serif"
            })
            
            // search input
            var geocoder = new MapboxGeocoder({
                accessToken: mapboxgl.accessToken
            });
            document.getElementById('geocoder').appendChild(geocoder.onAdd(map));


            map.on('load', function () {

                // FullscreenControl
                map.addControl(new mapboxgl.FullscreenControl());

                // Add zoom and rotation controls to the map.
                map.addControl(new mapboxgl.NavigationControl());

                // Add geolocate control to the map.
                // map.addControl(new mapboxgl.GeolocateControl({
                //     positionOptions: {
                //         enableHighAccuracy: true
                //     },
                //     trackUserLocation: true
                // }));

                //for Heatmap and Point
                map.addSource('accidents', {
                    "type": "geojson",
                    "data": "./convertcsv.geojson"
                });        
                
                
                $.ajax({
                    url: "./convertcsv.geojson",
                    dataType: "json",
                    success: function (result) {
                        console.log(result.features)

                        // =======================事故道路型態比例 for accidents position Pie chart=======================
                        var accident_position_data = [];
                        var accident_position_1 = 0,
                            accident_position_2 = 0,
                            accident_position_3 = 0,
                            accident_position_4 = 0,
                            accident_position_5 = 0,
                            accident_position_6 = 0,
                            accident_position_7 = 0,
                            accident_position_8 = 0,
                            accident_position_9 = 0,
                            accident_position_10 = 0,
                            accident_position_11 = 0,
                            accident_position_12 = 0,
                            accident_position_13 = 0,
                            accident_position_14 = 0,
                            accident_position_15 = 0,
                            accident_position_16 = 0,
                            accident_position_17 = 0,
                            accident_position_18 = 0,
                            accident_position_19 = 0,
                            accident_position_20 = 0,
                            accident_position_21 = 0,
                            accident_position_22 = 0;
                            
                        //計算總和
                        $.each(result.features, function (index, item) {
                //             accident_position.push(item.properties.Position);
                            switch(item.properties.Position){
                                case 1:
                                    accident_position_1 = accident_position_1 + 1;
                                    break;
                                case 2:
                                    accident_position_2 = accident_position_2 + 1;
                                    break;
                                case 3:
                                    accident_position_3 = accident_position_3 + 1;
                                    break;
                                case 4:
                                    accident_position_4 = accident_position_4 + 1;
                                    break;
                                case 5:
                                    accident_position_5 = accident_position_5 + 1;
                                    break;
                                case 6:
                                    accident_position_6 = accident_position_6 + 1;
                                    break;
                                case 7:
                                    accident_position_7 = accident_position_7 + 1;
                                    break;
                                case 8:
                                    accident_position_8 = accident_position_8 + 1;
                                    break;
                                case 9:
                                    accident_position_9 = accident_position_9 + 1;
                                    break;
                                case 10:
                                    accident_position_10 = accident_position_10 + 1;
                                    break;
                                case 11:
                                    accident_position_11 = accident_position_11 + 1;
                                    break;
                                case 12:
                                    accident_position_12 = accident_position_12 + 1;
                                    break;
                                case 13:
                                    accident_position_13 = accident_position_13 + 1;
                                    break;
                                case 14:
                                    accident_position_14 = accident_position_14 + 1;
                                    break;
                                case 15:
                                    accident_position_15 = accident_position_15 + 1;
                                    break;
                                case 16:
                                    accident_position_16 = accident_position_16 + 1;
                                    break;
                                case 17:
                                    accident_position_17 = accident_position_17 + 1;
                                    break;
                                case 18:
                                    accident_position_18 = accident_position_18 + 1;
                                    break;
                                case 19:
                                    accident_position_19 = accident_position_19 + 1;
                                    break;
                                case 20:
                                    accident_position_20 = accident_position_20 + 1;
                                    break;
                                case 21:
                                    accident_position_21 = accident_position_21 + 1;
                                    break;
                                case 22:
                                    accident_position_22 = accident_position_22 + 1;
                                    break;
                            }
                        });

                        accident_position_data = [
                            {value:accident_position_1, name:'交叉路口內'},
                            {value:accident_position_2, name:'交叉口附近'},
                            {value:accident_position_3, name:'機車待轉區'},
                            {value:accident_position_4, name:'機車停等區'},
                            {value:accident_position_5, name:'交通島(含槽化線)'},
                            {value:accident_position_6, name:'迴轉道'},
                            {value:accident_position_7, name:'快車道'},
                            {value:accident_position_8, name:'慢車道'},
                            {value:accident_position_9, name:'一般車道(未劃分快慢車道)'},
                            {value:accident_position_10, name:'公車專用道'},
                            {value:accident_position_11, name:'機車專用道'},
                            {value:accident_position_12, name:'機車優先道'},
                            {value:accident_position_13, name:'路肩、路緣'},
                            {value:accident_position_14, name:'加速車道(交流道)'},
                            {value:accident_position_15, name:'減速車道'},
                            {value:accident_position_16, name:'直線匝道'},
                            {value:accident_position_17, name:'環道匝道'},
                            {value:accident_position_18, name:'行人穿越道'},
                            {value:accident_position_19, name:'穿越道附近'},
                            {value:accident_position_20, name:'人行道'},
                            {value:accident_position_21, name:'收費站附近'},
                            {value:accident_position_22, name:'其他'}
                        ];
                         
                        // 道路型態name陣列
                        var accident_position_name = [];
                        $.each(accident_position_data, function (index, item) {
                             accident_position_name.push(item.name);
                        });
                        console.log(accident_position_name)
                        console.log(accident_position_data)

                        var pie_chart_dom = document.getElementById("pie_dom");
                        var myChart = echarts.init(pie_chart_dom);
                        pie_option = {
                            // backgroundColor: '#2c343c',
                            title: {
                                text: '2016年 事故道路型態比例',
                                right: 80,
                                textStyle:{
                                    fontSize: 14,
                                    color: '#000',
                                    fontWeight: 900
                                }
                            },
                            tooltip : {
                                trigger: 'item',
                                formatter: "{a} <br/>{b} : {c} ({d}%)"
                            },
                            visualMap: {
                                show: false,
                                min: 0,
                                max: 60000,
                                inRange: {
                                    colorLightness: [0.2, 1.5]
                                }
                            },
                            legend: {
                                        orient: 'vertical',
                                        left: 'left',
                                        data: accident_position_name
                                    },
                            series : [
                                {
                                    name:'道路型態',
                                    type:'pie',
                                    radius : '55%',
                                    center: ['50%', '70%'],
                                    data:accident_position_data.sort(function (a, b) { return a.value - b.value; }),
                                    // roseType: 'radius',
                                    label: {
                                        normal: {
                                            textStyle: {
                                                // color: 'rgba(255, 255, 255, 0.3)'
                                            }
                                        }
                                    },
                                    labelLine: {
                                        normal: {
                                            lineStyle: {
                                                // color: 'rgba(255, 255, 255, 0.3)'
                                            },
                                            smooth: 0.2,
                                            length: 10,
                                            length2: 20
                                        }
                                    },
                                    itemStyle: {
                                        normal: {
                                            // color: '#c23531',
                                            // shadowBlur: 200,
                                            // shadowColor: 'rgba(0, 0, 0, 0.5)'
                                        },
                                        emphasis: {
                                            shadowBlur: 10,
                                            shadowOffsetX: 0,
                                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                                        }
                                    },

                                    animationType: 'scale',
                                    animationEasing: 'elasticOut',
                                    animationDelay: function (idx) {
                                        return Math.random() * 200;
                                    }
                                }
                            ]
                        };
                        
                        if (pie_option && typeof pie_option === "object") {
                            myChart.setOption(pie_option, true);
                        };

                        // =======================天氣=======================
                        var weather_chart_dom = document.getElementById("weather_dom");
                        var weather_chart = echarts.init(weather_chart_dom);
                        var weatherIcon = {
                            'downpour': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IndlYXRoZXIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iODQuODMycHgiIGhlaWdodD0iODIuNTg0cHgiIHZpZXdCb3g9IjAgMCA4NC44MzIgODIuNTg0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA4NC44MzIgODIuNTg0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxnPg0KCQkNCgkJCTxyYWRpYWxHcmFkaWVudCBpZD0iU1ZHSURfMV8iIGN4PSItNTguMzIzNyIgY3k9IjM3LjcxMzQiIHI9IjguNzI5MyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgwLjk5OTUgLTAuMDMxNSAtMC4wMzE1IC0wLjk5OTUgMTAwLjM1ODMgNDguMTQ3MSkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4NCgkJCTxzdG9wICBvZmZzZXQ9IjAiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkNBMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuNDE0NiIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQzgwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC42MDQxIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZDMDAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjc0NzciIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkI0MDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuODY4MiIgc3R5bGU9InN0b3AtY29sb3I6I0ZFQTIwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC45NzMyIiBzdHlsZT0ic3RvcC1jb2xvcjojRkU4QTAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojRkU4MzAwIi8+DQoJCTwvcmFkaWFsR3JhZGllbnQ+DQoJCTxwYXRoIGZpbGw9InVybCgjU1ZHSURfMV8pIiBkPSJNMzcuNTc3LDIzLjY4MmMwLDAtMy41NDItNC4wMzUsMC4yNzYtMTAuMTc0QzQwLjEzLDkuODQ3LDQzLjg4NCw1LjU0LDQwLjg5OCwxDQoJCQljNC43NzUsNC4zMzcsNC43MzcsOC4wNzUsMi41MiwxMy41MjZjLTEuODQsNC41MiwyLjgxOCw4LjgxLDIuODE4LDguODFMMzcuNTc3LDIzLjY4MnoiLz4NCgkJDQoJCQk8cmFkaWFsR3JhZGllbnQgaWQ9IlNWR0lEXzJfIiBjeD0iLTcwLjIxMjQiIGN5PSIzMi45NjM0IiByPSI5LjMzOTYiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMC45OTk1IC0wLjAzMTUgLTAuMDMxNSAtMC45OTk1IDEwMC4zNTgzIDQ4LjE0NzEpIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZDQTAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjQxNDYiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkM4MDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuNjA0MSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQzAwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC43NDc3IiBzdHlsZT0ic3RvcC1jb2xvcjojRkZCNDAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjg2ODIiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRUEyMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuOTczMiIgc3R5bGU9InN0b3AtY29sb3I6I0ZFOEEwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMSIgc3R5bGU9InN0b3AtY29sb3I6I0ZFODMwMCIvPg0KCQk8L3JhZGlhbEdyYWRpZW50Pg0KCQk8cGF0aCBmaWxsPSJ1cmwoI1NWR0lEXzJfKSIgZD0iTTI5LjY0MiwyOC4xODFjMCwwLTUuMDg2LTEuNzI3LTQuODQ3LTguOTUzYzAuMTM4LTQuMzA4LDEuMjM5LTkuOTE1LTMuNjE5LTEyLjM1MQ0KCQkJYzYuMzA0LDEuMzY5LDguMTQyLDQuNjIxLDguOTUsMTAuNDU0YzAuNjYyLDQuODMxLDYuODQ0LDYuMjE4LDYuODQ0LDYuMjE4TDI5LjY0MiwyOC4xODF6Ii8+DQoJCQ0KCQkJPHJhZGlhbEdyYWRpZW50IGlkPSJTVkdJRF8zXyIgY3g9Ii04MS41NDc5IiBjeT0iMjIuMTU5MiIgcj0iOS40NDg4IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDAuOTk5NSAtMC4wMzE1IC0wLjAzMTUgLTAuOTk5NSAxMDAuMzU4MyA0OC4xNDcxKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPg0KCQkJPHN0b3AgIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQ0EwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC40MTQ2IiBzdHlsZT0ic3RvcC1jb2xvcjojRkZDODAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjYwNDEiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkMwMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuNzQ3NyIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQjQwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC44NjgyIiBzdHlsZT0ic3RvcC1jb2xvcjojRkVBMjAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjk3MzIiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRThBMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjEiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRTgzMDAiLz4NCgkJPC9yYWRpYWxHcmFkaWVudD4NCgkJPHBhdGggZmlsbD0idXJsKCNTVkdJRF8zXykiIGQ9Ik0yNS4wMiwzNi4wNDRjMCwwLTUuMjczLDEuMDQ4LTguNjc4LTUuMzNjLTIuMDMtMy44MDItMy44ODEtOS4yMDctOS4zMDctOC44OTENCgkJCWM2LjE0NC0xLjk2OCw5LjM2My0wLjA2OCwxMi45NzUsNC41ODJjMi45OSwzLjg1LDkuMDQyLDEuOTYyLDkuMDQyLDEuOTYyTDI1LjAyLDM2LjA0NHoiLz4NCgkJDQoJCQk8cmFkaWFsR3JhZGllbnQgaWQ9IlNWR0lEXzRfIiBjeD0iLTg2LjU2NjQiIGN5PSI5LjAxMzciIHI9IjguNzI5NSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgwLjk5OTUgLTAuMDMxNSAtMC4wMzE1IC0wLjk5OTUgMTAwLjM1ODMgNDguMTQ3MSkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4NCgkJCTxzdG9wICBvZmZzZXQ9IjAiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkNBMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuNDE0NiIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQzgwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC42MDQxIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZDMDAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjc0NzciIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkI0MDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuODY4MiIgc3R5bGU9InN0b3AtY29sb3I6I0ZFQTIwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC45NzMyIiBzdHlsZT0ic3RvcC1jb2xvcjojRkU4QTAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojRkU4MzAwIi8+DQoJCTwvcmFkaWFsR3JhZGllbnQ+DQoJCTxwYXRoIGZpbGw9InVybCgjU1ZHSURfNF8pIiBkPSJNMjQuOTQ0LDQ1LjE2M2MwLDAtNC4wMzYsMy41NDItMTAuMTc1LTAuMjc4Yy0zLjY2NC0yLjI3NC03Ljk2NS02LjAyOS0xMi41MDgtMy4wNDENCgkJCWM0LjMzOC00Ljc3NCw4LjA3NS00Ljc0LDEzLjUyOC0yLjUyMWM0LjUxNywxLjg0LDguODA3LTIuODE4LDguODA3LTIuODE4TDI0Ljk0NCw0NS4xNjN6Ii8+DQoJCQ0KCQkJPHJhZGlhbEdyYWRpZW50IGlkPSJTVkdJRF81XyIgY3g9Ii04MS44MTY0IiBjeT0iLTIuODc2IiByPSI5LjMzOTMiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMC45OTk1IC0wLjAzMTUgLTAuMDMxNSAtMC45OTk1IDEwMC4zNTgzIDQ4LjE0NzEpIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZDQTAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjQxNDYiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkM4MDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuNjA0MSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQzAwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC43NDc3IiBzdHlsZT0ic3RvcC1jb2xvcjojRkZCNDAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjg2ODIiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRUEyMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuOTczMiIgc3R5bGU9InN0b3AtY29sb3I6I0ZFOEEwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMSIgc3R5bGU9InN0b3AtY29sb3I6I0ZFODMwMCIvPg0KCQk8L3JhZGlhbEdyYWRpZW50Pg0KCQk8cGF0aCBmaWxsPSJ1cmwoI1NWR0lEXzVfKSIgZD0iTTI5LjQ0Myw1My4xMDFjMCwwLTEuNzI5LDUuMDg0LTguOTU4LDQuODQ0Yy00LjMwMy0wLjEzOS05LjkwOS0xLjIzNi0xMi4zNDYsMy42MjENCgkJCWMxLjM2NS02LjMwMyw0LjYxOC04LjE0NCwxMC40NTEtOC45NDdjNC44MzQtMC42NjUsNi4yMTktNi44NDgsNi4yMTktNi44NDhMMjkuNDQzLDUzLjEwMXoiLz4NCgkJDQoJCQk8cmFkaWFsR3JhZGllbnQgaWQ9IlNWR0lEXzZfIiBjeD0iLTcxLjAxMDMiIGN5PSItMTQuMjEzOSIgcj0iOS40NDc2IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDAuOTk5NSAtMC4wMzE1IC0wLjAzMTUgLTAuOTk5NSAxMDAuMzU4MyA0OC4xNDcxKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPg0KCQkJPHN0b3AgIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQ0EwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC40MTQ2IiBzdHlsZT0ic3RvcC1jb2xvcjojRkZDODAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjYwNDEiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkMwMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuNzQ3NyIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQjQwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC44NjgyIiBzdHlsZT0ic3RvcC1jb2xvcjojRkVBMjAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjk3MzIiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRThBMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjEiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRTgzMDAiLz4NCgkJPC9yYWRpYWxHcmFkaWVudD4NCgkJPHBhdGggZmlsbD0idXJsKCNTVkdJRF82XykiIGQ9Ik0zNy4zMDcsNTcuNzI0YzAsMCwxLjA0Niw1LjI2Ny01LjMzNiw4LjY3NGMtMy43OTcsMi4wMjgtOS4xOTgsMy44ODUtOC44ODQsOS4zMDkNCgkJCWMtMS45NjctNi4xMzktMC4wNjYtOS4zNjMsNC41NzktMTIuOTczYzMuODU0LTIuOTk0LDEuOTY0LTkuMDQxLDEuOTY0LTkuMDQxTDM3LjMwNyw1Ny43MjR6Ii8+DQoJCQ0KCQkJPHJhZGlhbEdyYWRpZW50IGlkPSJTVkdJRF83XyIgY3g9Ii01Ny44NjkxIiBjeT0iLTE5LjIyNzUiIHI9IjguNzMwMSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgwLjk5OTUgLTAuMDMxNSAtMC4wMzE1IC0wLjk5OTUgMTAwLjM1ODMgNDguMTQ3MSkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4NCgkJCTxzdG9wICBvZmZzZXQ9IjAiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkNBMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuNDE0NiIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQzgwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC42MDQxIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZDMDAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjc0NzciIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkI0MDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuODY4MiIgc3R5bGU9InN0b3AtY29sb3I6I0ZFQTIwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC45NzMyIiBzdHlsZT0ic3RvcC1jb2xvcjojRkU4QTAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojRkU4MzAwIi8+DQoJCTwvcmFkaWFsR3JhZGllbnQ+DQoJCTxwYXRoIGZpbGw9InVybCgjU1ZHSURfN18pIiBkPSJNNDYuNDI0LDU3Ljc5NWMwLDAsMy41NDIsNC4wMzYtMC4yNzcsMTAuMTc5Yy0yLjI3NSwzLjY2LTYuMDMsNy45NjUtMy4wNDMsMTIuNTA0DQoJCQljLTQuNzc0LTQuMzMyLTQuNzM3LTguMDcyLTIuNTIxLTEzLjUyNmMxLjgzOS00LjUxOS0yLjgyMi04LjgwOC0yLjgyMi04LjgwOEw0Ni40MjQsNTcuNzk1eiIvPg0KCQkNCgkJCTxyYWRpYWxHcmFkaWVudCBpZD0iU1ZHSURfOF8iIGN4PSItNDUuOTc5IiBjeT0iLTE0LjQ4MjQiIHI9IjkuMzQiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMC45OTk1IC0wLjAzMTUgLTAuMDMxNSAtMC45OTk1IDEwMC4zNTgzIDQ4LjE0NzEpIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZDQTAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjQxNDYiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkM4MDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuNjA0MSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQzAwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC43NDc3IiBzdHlsZT0ic3RvcC1jb2xvcjojRkZCNDAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjg2ODIiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRUEyMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuOTczMiIgc3R5bGU9InN0b3AtY29sb3I6I0ZFOEEwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMSIgc3R5bGU9InN0b3AtY29sb3I6I0ZFODMwMCIvPg0KCQk8L3JhZGlhbEdyYWRpZW50Pg0KCQk8cGF0aCBmaWxsPSJ1cmwoI1NWR0lEXzhfKSIgZD0iTTU0LjM1OSw1My4zYzAsMCw1LjA4NiwxLjcyMyw0Ljg0OSw4Ljk1MmMtMC4xNCw0LjMwOC0xLjI0LDkuOTE0LDMuNjE3LDEyLjM1NA0KCQkJYy02LjI5OC0xLjM2OC04LjE0Ni00LjYyNy04Ljk1LTEwLjQ1N2MtMC42NjItNC44MzItNi44NDYtNi4yMTktNi44NDYtNi4yMTlMNTQuMzU5LDUzLjN6Ii8+DQoJCQ0KCQkJPHJhZGlhbEdyYWRpZW50IGlkPSJTVkdJRF85XyIgY3g9Ii0zNC42NDI2IiBjeT0iLTMuNjc2MyIgcj0iOS40NDg5IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDAuOTk5NSAtMC4wMzE1IC0wLjAzMTUgLTAuOTk5NSAxMDAuMzU4MyA0OC4xNDcxKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPg0KCQkJPHN0b3AgIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQ0EwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC40MTQ2IiBzdHlsZT0ic3RvcC1jb2xvcjojRkZDODAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjYwNDEiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkMwMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuNzQ3NyIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQjQwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC44NjgyIiBzdHlsZT0ic3RvcC1jb2xvcjojRkVBMjAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjk3MzIiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRThBMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjEiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRTgzMDAiLz4NCgkJPC9yYWRpYWxHcmFkaWVudD4NCgkJPHBhdGggZmlsbD0idXJsKCNTVkdJRF85XykiIGQ9Ik01OC45ODIsNDUuNDM3YzAsMCw1LjI3LTEuMDQ5LDguNjc4LDUuMzNjMi4wMzEsMy43OTksMy44OCw5LjIwNSw5LjMwNyw4Ljg4OQ0KCQkJYy02LjEzOCwxLjk2OC05LjM2MSwwLjA3LTEyLjk3Ny00LjU4MmMtMi45OS0zLjg1LTkuMDQxLTEuOTYxLTkuMDQxLTEuOTYxTDU4Ljk4Miw0NS40Mzd6Ii8+DQoJCQ0KCQkJPHJhZGlhbEdyYWRpZW50IGlkPSJTVkdJRF8xMF8iIGN4PSItMjkuNjI0NSIgY3k9IjkuNDY5NyIgcj0iOC43MjkzIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDAuOTk5NSAtMC4wMzE1IC0wLjAzMTUgLTAuOTk5NSAxMDAuMzU4MyA0OC4xNDcxKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPg0KCQkJPHN0b3AgIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQ0EwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC40MTQ2IiBzdHlsZT0ic3RvcC1jb2xvcjojRkZDODAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjYwNDEiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkMwMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuNzQ3NyIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQjQwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC44NjgyIiBzdHlsZT0ic3RvcC1jb2xvcjojRkVBMjAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjk3MzIiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRThBMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjEiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRTgzMDAiLz4NCgkJPC9yYWRpYWxHcmFkaWVudD4NCgkJPHBhdGggZmlsbD0idXJsKCNTVkdJRF8xMF8pIiBkPSJNNTkuMDU5LDM2LjMxM2MwLDAsNC4wMzUtMy41NDEsMTAuMTc4LDAuMjhjMy42NjIsMi4yNzMsNy45NjMsNi4wMjksMTIuNTAyLDMuMDQ0DQoJCQljLTQuMzMsNC43NzMtOC4wNzMsNC43NC0xMy41MjUsMi41MTljLTQuNTE4LTEuODM3LTguODA3LDIuODIxLTguODA3LDIuODIxTDU5LjA1OSwzNi4zMTN6Ii8+DQoJCQ0KCQkJPHJhZGlhbEdyYWRpZW50IGlkPSJTVkdJRF8xMV8iIGN4PSItMzQuMzczIiBjeT0iMjEuMzU5NCIgcj0iOS4zMzc5IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDAuOTk5NSAtMC4wMzE1IC0wLjAzMTUgLTAuOTk5NSAxMDAuMzU4MyA0OC4xNDcxKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPg0KCQkJPHN0b3AgIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQ0EwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC40MTQ2IiBzdHlsZT0ic3RvcC1jb2xvcjojRkZDODAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjYwNDEiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkMwMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuNzQ3NyIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQjQwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC44NjgyIiBzdHlsZT0ic3RvcC1jb2xvcjojRkVBMjAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjk3MzIiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRThBMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjEiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRTgzMDAiLz4NCgkJPC9yYWRpYWxHcmFkaWVudD4NCgkJPHBhdGggZmlsbD0idXJsKCNTVkdJRF8xMV8pIiBkPSJNNTQuNTYxLDI4LjM4MWMwLDAsMS43MjctNS4wODgsOC45NTUtNC44NTFjNC4zMDksMC4xNDMsOS45MSwxLjI0MywxMi4zNDgtMy42MTQNCgkJCWMtMS4zNjMsNi4yOTktNC42MTksOC4xMzktMTAuNDU0LDguOTQ1Yy00LjgzMywwLjY2Ni02LjIxNiw2Ljg0Ni02LjIxNiw2Ljg0Nkw1NC41NjEsMjguMzgxeiIvPg0KCQkNCgkJCTxyYWRpYWxHcmFkaWVudCBpZD0iU1ZHSURfMTJfIiBjeD0iLTQ1LjE3ODciIGN5PSIzMi42OTYzIiByPSI5LjQ0NjIiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMC45OTk1IC0wLjAzMTUgLTAuMDMxNSAtMC45OTk1IDEwMC4zNTgzIDQ4LjE0NzEpIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZDQTAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjQxNDYiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkM4MDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuNjA0MSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQzAwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMC43NDc3IiBzdHlsZT0ic3RvcC1jb2xvcjojRkZCNDAwIi8+DQoJCQk8c3RvcCAgb2Zmc2V0PSIwLjg2ODIiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRUEyMDAiLz4NCgkJCTxzdG9wICBvZmZzZXQ9IjAuOTczMiIgc3R5bGU9InN0b3AtY29sb3I6I0ZFOEEwMCIvPg0KCQkJPHN0b3AgIG9mZnNldD0iMSIgc3R5bGU9InN0b3AtY29sb3I6I0ZFODMwMCIvPg0KCQk8L3JhZGlhbEdyYWRpZW50Pg0KCQk8cGF0aCBmaWxsPSJ1cmwoI1NWR0lEXzEyXykiIGQ9Ik00Ni42OTgsMjMuNzU0YzAsMC0xLjA1Mi01LjI2Niw1LjMzMS04LjY3NWMzLjgtMi4wMyw5LjE5OS0zLjg4LDguODg1LTkuMzA0DQoJCQljMS45NjcsNi4xMzYsMC4wNjYsOS4zNjEtNC41OCwxMi45NzVjLTMuODUyLDIuOTkzLTEuOTYyLDkuMDM2LTEuOTYyLDkuMDM2TDQ2LjY5OCwyMy43NTR6Ii8+DQoJPC9nPg0KCQ0KCQk8cmFkaWFsR3JhZGllbnQgaWQ9IlNWR0lEXzEzXyIgY3g9Ii01Ni42MzUzIiBjeT0iMTQuMTA5NCIgcj0iMTguOTgwMyIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgwLjk5OTUgLTAuMDMxNSAtMC4wMzE1IC0wLjk5OTUgMTAwLjM1ODMgNDguMTQ3MSkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4NCgkJPHN0b3AgIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQ0EwMCIvPg0KCQk8c3RvcCAgb2Zmc2V0PSIwLjI3MDYiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkM2MDAiLz4NCgkJPHN0b3AgIG9mZnNldD0iMC41MjczIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZCQjAwIi8+DQoJCTxzdG9wICBvZmZzZXQ9IjAuNzc3NiIgc3R5bGU9InN0b3AtY29sb3I6I0ZFQTgwMCIvPg0KCQk8c3RvcCAgb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojRkU5MDAwIi8+DQoJPC9yYWRpYWxHcmFkaWVudD4NCgk8cGF0aCBmaWxsPSJ1cmwoI1NWR0lEXzEzXykiIGQ9Ik02MC45NzMsNDAuMTQzYy0wLjMzMi0xMC40NzctOS4wOTEtMTguNzA1LTE5LjU3MS0xOC4zNzVDMzAuOTI2LDIyLjA5NywyMi43LDMwLjg2LDIzLjAyOSw0MS4zMzUNCgkJYzAuMzI5LDEwLjQ3OSw5LjA5LDE4LjcwNSwxOS41NywxOC4zNzVDNTMuMDc1LDU5LjM4Miw2MS4zMDEsNTAuNjE5LDYwLjk3Myw0MC4xNDN6Ii8+DQo8L2c+DQo8L3N2Zz4NCg==',
                            'gale': '<g><path fill="#231F20" d="M27.284,60.078c0.499-1.57,0.772-10.36,0.218-10.536c-0.552-0.174-5.403,7.161-5.902,8.729c-0.499,1.57,0.369,3.246,1.939,3.746C25.108,62.517,26.785,61.646,27.284,60.078z M26.312,59.854c-0.347,1.09-1.51,1.693-2.601,1.348c-1.09-0.348-1.693-1.512-1.346-2.602c0.347-1.09,2.087-3.509,3.178-3.162C26.632,55.785,26.658,58.765,26.312,59.854z"/><path fill="#231F20" d="M26.288,71.657c-0.458,1.439,0.338,2.979,1.778,3.436s2.978-0.339,3.436-1.777c0.457-1.439,0.707-9.502,0.2-9.664C31.195,63.491,26.745,70.218,26.288,71.657z M30.609,73.11c-0.317,1-1.385,1.554-2.385,1.236c-1-0.318-1.554-1.387-1.235-2.387c0.317-1,1.915-3.219,2.915-2.9S30.927,72.11,30.609,73.11z"/><path fill="#231F20" d="M41.809,71.657c-0.457,1.439,0.339,2.979,1.779,3.436c1.439,0.457,2.979-0.339,3.436-1.777c0.457-1.439,0.709-9.502,0.201-9.664C46.716,63.491,42.267,70.218,41.809,71.657z M46.131,73.11c-0.316,1-1.385,1.554-2.385,1.236c-1-0.318-1.553-1.387-1.235-2.387c0.318-1,1.914-3.219,2.915-2.9C46.426,69.378,46.45,72.11,46.131,73.11z"/><path fill="#231F20" d="M42.238,49.976c-0.507-0.16-4.956,6.566-5.414,8.006c-0.457,1.439,0.339,2.978,1.779,3.436c1.439,0.457,2.977-0.34,3.435-1.779C42.494,58.199,42.745,50.136,42.238,49.976z M41.146,59.435c-0.318,1-1.386,1.553-2.386,1.234c-1-0.316-1.553-1.385-1.235-2.385s1.915-3.219,2.915-2.9C41.439,55.702,41.463,58.435,41.146,59.435z"/><path fill="#231F20" d="M51.302,57.981c-0.458,1.439,0.339,2.978,1.778,3.436c1.439,0.457,2.977-0.34,3.436-1.779c0.457-1.438,0.707-9.502,0.199-9.662C56.209,49.815,51.76,56.542,51.302,57.981z M55.623,59.435c-0.318,1-1.387,1.553-2.387,1.234c-1-0.316-1.553-1.385-1.234-2.385s1.915-3.219,2.915-2.9S55.939,58.435,55.623,59.435z"/><path fill="#231F20" d="M64.743,23.012C68.049,3.659,43.525,6.399,44.917,19.17c-5.27-11.751-21.869-5.36-20.184,3.242c-5.312-7.201-23.584,0.432-13.774,12.738c9.183,11.519,53.707,9.737,62.514,5.711C90.379,33.132,75.754,14.242,64.743,23.012zM20.944,33.285c4.378-3.777,0.692-9.894-3.563-7.575c-1.735,0.939-2.316,3.695-0.209,4.566c3.378,1.388,2.035-3.518,0.096-1.515c0.553-3.517,4.736-1.695,4.227,1.269c-0.929,5.404-10.91,2.393-7.801-4.437c1.957-4.301,6.061-3.722,7.962-2.735c2.004,1.046,3.578,3.256,3.406,5.915C24.943,30.637,23.533,33.023,20.944,33.285z M37.024,29.228c5.796-5.002,0.912-13.097-4.712-10.03c-2.294,1.244-3.066,4.895-0.277,6.039c4.472,1.835,2.69-4.649,0.119-2.004c0.738-4.654,6.278-2.243,5.599,1.682c-1.231,7.157-14.434,3.168-10.323-5.869c2.594-5.694,8.028-4.931,10.536-3.622c2.656,1.384,4.736,4.313,4.51,7.827C42.314,25.72,40.449,28.877,37.024,29.228z M57.786,25.659c5.797-5.004,0.915-13.103-4.716-10.034c-2.29,1.25-3.064,4.897-0.274,6.044c4.476,1.838,2.695-4.652,0.126-2.004c0.73-4.653,6.268-2.245,5.591,1.682c-1.229,7.153-14.435,3.166-10.319-5.87c2.593-5.695,8.024-4.93,10.537-3.621c2.653,1.379,4.73,4.308,4.503,7.822C63.079,22.151,61.214,25.303,57.786,25.659z M73.663,34.018c4.373-3.776,0.688-9.894-3.565-7.575c-1.73,0.944-2.312,3.698-0.207,4.563c3.377,1.394,2.032-3.514,0.093-1.515c0.557-3.515,4.738-1.693,4.227,1.274c-0.926,5.41-10.908,2.393-7.798-4.439c1.958-4.298,6.062-3.722,7.957-2.733c2.009,1.04,3.579,3.256,3.409,5.912C77.659,31.372,76.253,33.758,73.663,34.018z"/></g>',
                            'windy_dusty': './images/weathericon-03.png',
                            'foggy': './images/weathericon-04.png',
                            'snowy': './images/weathericon-05.png',
                            'rain': './images/weathericon-06.png',
                            'overcast': './images/weathericon-07.png',
                            'sunny': './images/weathericon-08.png'
                        };
                        var weather_data = [];
                        var weather_1 = 0,
                            weather_2 = 0,
                            weather_3 = 0,
                            weather_4 = 0,
                            weather_5 = 0,
                            weather_6 = 0,
                            weather_7 = 0,
                            weather_8 = 0;
                            
                        //計算總和
                        $.each(result.features, function (index, item) {
                //             weather.push(item.properties.Weather);
                            switch(item.properties.Weather){
                                case 1:
                                    weather_1 = weather_1 + 1;
                                    break;
                                case 2:
                                    weather_2 = weather_2 + 1;
                                    break;
                                case 3:
                                    weather_3 = weather_3 + 1;
                                    break;
                                case 4:
                                    weather_4 = weather_4 + 1;
                                    break;
                                case 5:
                                    weather_5 = weather_5 + 1;
                                    break;
                                case 6:
                                    weather_6 = weather_6 + 1;
                                    break;
                                case 7:
                                    weather_7 = weather_7 + 1;
                                    break;
                                case 8:
                                    weather_8 = weather_8 + 1;
                                    break;
                            }
                        });

                        weather_data = [
                            {value:weather_1, name:'暴雨',symbol:weatherIcon.downpour, symbolSize: [40,40]},
                            {value:weather_2, name:'強風',symbol:weatherIcon.gale, symbolSize: [40,40]},
                            {value:weather_3, name:'風沙',symbol:weatherIcon.windy_dusty, symbolSize: [40,40]},
                            {value:weather_4, name:'霧或煙',symbol:weatherIcon.foggy, symbolSize: [40,40]},
                            {value:weather_5, name:'雪',symbol:weatherIcon.snowy, symbolSize: [40,40]},
                            {value:weather_6, name:'雨',symbol:weatherIcon.rain, symbolSize: [40,40]},
                            {value:weather_7, name:'陰',symbol:weatherIcon.overcast, symbolSize: [40,40]},
                            {value:weather_8, name:'晴',symbol:weatherIcon.sunny, symbolSize: [40,40]}
                        ];

                        // 天氣總和陣列
                        var weather_value_arr = [];
                        $.each(weather_data, function (index, item) {
                             weather_value_arr.push(item.value);
                        });
                        // var weatherIcons = {
                        //     'Sunny': './data/asset/img/weather/sunny_128.png',
                        //     'Cloudy': './data/asset/img/weather/cloudy_128.png',
                        //     'Showers': './data/asset/img/weather/showers_128.png'
                        // };

                        weather_option = {
                            title: {
                                text: '2016年 事故天氣統計',
                                left: 'center',
                                textStyle:{
                                    fontSize: 14,
                                    color: '#000',
                                    fontWeight: 900
                                }
                            },
                            tooltip: {
                                trigger: 'axis',
                                axisPointer: {
                                    type: 'none'
                                },
                                formatter: function (params) {
                                    return params[0].name + ': ' + params[0].value;
                                }
                            },
                            xAxis: {
                                data: ['暴雨', '強風', '風沙', '霧或煙', '雪', '雨', '陰', '晴', ]
                            },
                            yAxis: {},
                            series: [{
                                type: 'bar',
                                data: weather_value_arr
                                }, {
                                name: 'glyph',
                                type: 'pictorialBar',
                                barGap: '-100%',
                                symbolPosition: 'end',
                                symbolSize: 50,
                                symbolOffset: [0, '-120%'],
                                data: weather_data
                            }]
                        };
                        if (weather_option && typeof weather_option === "object") {
                            weather_chart.setOption(weather_option, true);
                        };
                    },
                    error: function(xhr) {
                        alert(xhr.statusText)
                    }
                })

                // Heatmap
                map.addLayer({
                    "id": "Heatmap",
                    "type": "heatmap",
                    "source": "accidents",
                    "maxzoom": 22,
                    "paint": {
                        "heatmap-weight": [
                            "interpolate",
                            ["linear"],
                            ["get", "Casualty"],
                            0,1,
                            22,1
                        ],
                        "heatmap-intensity": [
                            "interpolate",
                            ["linear"],
                            ["zoom"],
                            0,1,
                            22,1
                        ],
                        "heatmap-color": [
                            "interpolate",
                            ["linear"],
                            ["heatmap-density"],
                            0,"rgba(0, 0, 255, 0)",
                            0.01,"hsla(49, 73%, 57%, 0)",
                            0.19,"hsla(54, 100%, 50%, 0)",
                            0.67,"hsla(49, 100%, 50%, 0.5)",
                            0.84,"hsla(31, 99%, 55%, 0.96)",
                            1,"hsl(8, 100%, 50%)"
                        ],
                        "heatmap-radius": [
                            "interpolate",
                            ["linear"],
                            ["zoom"],
                            0,2,
                            22,2
                        ],
                        "heatmap-opacity": [
                            "interpolate",
                            ["linear"],
                            ["zoom"],
                            0,0.74,
                            22,0.74
                        ],
                    }
                }, 'waterway-label');
                
                // Point
                map.addLayer({
                    "id": "Point",
                    "type": "circle",
                    "source": "accidents",
                    // "minzoom": 11,
                    "paint": {
                        'circle-radius': [
                            'interpolate',
                            ['linear'],
                            ['number', ['get', 'Casualty']],
                                0, 0.1,
                                5, 24
                        ],
                        'circle-color': [
                            'interpolate',
                            ['linear'],
                            ['number', ['get', 'Casualty']],
                                0, '#2DC4B2',
                                1, '#3BB3C3',
                                2, '#669EC4',
                                3, '#8B88B6',
                                4, '#A2719B',
                                5, '#AA5E79'
                        ],
                        'circle-opacity': 0.3
                    }
                }, 'admin-2-boundaries-dispute');


                // slider interactivity
                document.getElementById('slider').addEventListener('input', function(e) {
                var hour = parseInt(e.target.value);
                // update the map
                map.setFilter('Point', ['==', ['number', ['get', 'Hour']], hour]);
                // converting 0-23 hour to AMPM format
                var ampm = hour >= 12 ? 'PM' : 'AM';
                var hour12 = hour % 12 ? hour % 12 : 12;
                // update text in the UI
                document.getElementById('active-hour').innerText = hour12 + ampm;

                });
            });

            //click on tree to view Casualty in a popup
            map.on('click', 'Point', function (e) {
                new mapboxgl.Popup()
                    .setLngLat(e.features[0].geometry.coordinates)
                    .setHTML('<b>月份 Month:</b> '+ e.features[0].properties.Month + 
                             '月<br><b>死亡 Death:</b> '+ e.features[0].properties.Killed +
                             '人<br><b>受傷 Injured:</b> '+ e.features[0].properties.Injured + 
                             '人<br><b>死傷總和 Casualty:</b> '+ e.features[0].properties.Casualty + '人')
                    .addTo(map);
            });

            // change layer
            var toggleableLayerIds = [ 'Heatmap', 'Point' ];
            for (var i = 0; i < toggleableLayerIds.length; i++) {
                var id = toggleableLayerIds[i];

                var link = document.createElement('a');
                link.href = '#';
                link.className = 'active';
                link.textContent = id;

                link.onclick = function (e) {
                    var clickedLayer = this.textContent;
                    e.preventDefault();
                    e.stopPropagation();

                    var visibility = map.getLayoutProperty(clickedLayer, 'visibility');

                    if (visibility === 'visible') {
                        map.setLayoutProperty(clickedLayer, 'visibility', 'none');
                        this.className = '';
                        if (clickedLayer === "Point") {
                            $('.session').hide();
                        }
                    } else {
                        this.className = 'active';
                        map.setLayoutProperty(clickedLayer, 'visibility', 'visible');
                        if (clickedLayer === "Point") {
                            $('.session').show();
                        }
                    }
                };

                var layers = document.getElementById('menu');
                layers.appendChild(link);
            }


        });
    </script>
    
    <!-- chartjs -->
    <script>
		var ctx = document.getElementById('injured').getContext('2d');
		var chart = new Chart(ctx, {
		    type: 'line',

		    data: {
		        labels: ["2013", "2014", "2015", "2016"],
		        datasets: [{
		            label: "受傷人數",
		            backgroundColor: 'rgb(80,193,233)',
		            borderColor: 'rgb(80,193,233)',
		            data: [70288, 70454, 71797, 70719],
		        }]
		    },

		    options: {	
				scales: {
					xAxes: [{
						display: true,
						scaleLabel: {
							display: true,
							labelString: '年份'
						}
					}],
					yAxes: [{
						display: true,
						scaleLabel: {
							display: true,
							labelString: '人數'
						}
					}]
				}
			}
		});
	</script>
	<script>
		var ctx = document.getElementById('death').getContext('2d');
		var chart = new Chart(ctx, {
		    type: 'line',

		    data: {
		        labels: ["2013", "2014", "2015", "2016"],
		        datasets: [{
		            label: "死亡人數",
		            backgroundColor: 'rgb(255, 99, 132)',
		            borderColor: 'rgb(255, 99, 132)',
		            data: [214, 210, 220, 275],
		        }]
		    },
		    
		     options: {	
				scales: {
					xAxes: [{
						display: true,
						scaleLabel: {
							display: true,
							labelString: '年份'
						}
					}],
					yAxes: [{
						display: true,
						scaleLabel: {
							display: true,
							labelString: '人數'
						}
					}]
				}
			}
		});
    </script>
    
    <!-- echarts -->
    <script>
        // 汽機車死亡人數
        var dom = document.getElementById("container");
        var myChart = echarts.init(dom);
        option = {
            title: {
                text: '汽機車死亡人數',
                left: 'center',
                textStyle:{
                    fontSize: 14,
                    fontWeight: 900
                }
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            legend: {
                data: ['汽車', '機車'],
                right: 0
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                name: '人數',
                nameLocation: 'middle',
                nameGap: 15,
                type: 'value',
                boundaryGap: [0, 0.01]
            },
            yAxis: {
                name: '年份',
                type: 'category',
                data: ['106年','105年','104年','103年']
            },
            series: [
                {
                    name: '汽車',
                    type: 'bar',
                    data: [93, 72, 75, 73]
                },
                {
                    name: '機車',
                    type: 'bar',
                    data: [77, 71, 66, 69]
                }
            ]
        };
        if (option && typeof option === "object") {
            myChart.setOption(option, true);
        };

        // 汽車事故
        // var dom2 = document.getElementById("container2");
        // var myChart2 = echarts.init(dom2);
        // var option2 = {
        //     title: {
        //         text: '汽車事故',
        //         textStyle:{
        //             fontSize: 14,
        //             fontWeight: 900
        //         }
        //     },
        //     color: ['#DB9833'],
        //     tooltip : {
        //         trigger: 'axis',
        //         axisPointer : {            // 坐标轴指示器，坐标轴触发有效
        //             type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
        //         }
        //     },
        //     grid: {
        //         left: '3%',
        //         right: '4%',
        //         bottom: '3%',
        //         containLabel: true
        //     },
        //     xAxis : [
        //         {
        //             name:'年齡',
        //             type : 'category',
        //             data : ['103年', '104年', '105年', '106年'],
        //             axisTick: {
        //                 alignWithLabel: true
        //             }
        //         }
        //     ],
        //     yAxis : [
        //         {
        //             name:'死亡人數',
        //             type : 'value'
        //         }
        //     ],
        //     series : [
        //         {
        //             name:'死亡人數',
        //             type:'bar',
        //             barWidth: '10%',
        //             data:[73, 75, 72, 93]
        //         }
        //     ]
        // };
        // if (option && typeof option === "object") {
        //     myChart2.setOption(option2, true);
        // };

    // --------------年度男女年齡----------------------------------------------------------------------------------------------------------

        var box_dom = document.getElementById("box");
        var box_myChart = echarts.init(box_dom);

        var colors = ['#5793f3', '#d14a61', '#675bba'];

        var box_option = {
            color: colors,
            title: {
                text: '103年度',
                textStyle:{
                    fontSize: 14,
                    fontWeight: 900
                }
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'cross'
                }
            },
            grid: {
                right: '20%'
            },
            toolbox: {
                feature: {
                    dataView: {show: true, readOnly: false},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            legend: {
                data:['人數']
            },
            xAxis: [
                {
                    name:'年齡',
                    type: 'category',
                    axisTick: {
                        alignWithLabel: true
                    },
                    data: ['<20','20~30','30~40','40~50','50~60','60~70','70~80','80~90','>90']
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    name: '事故人數',
                    min: 0,
                    max: 10000,
                    position: 'left',
                    axisLine: {
                        lineStyle: {
                            color: colors[0]
                        }
                    },
                    axisLabel: {
                        formatter: '{value}'
                    }
                }
            ],
            series: [
                {
                    name:'男',
                    type:'bar',
                    data:[4541, 9030, 6551, 5774, 5488, 3029, 772, 256, 68]
                },
                {
                    name:'女',
                    type:'bar',
                    data:[1659, 4221, 2995, 2453, 2274, 1260, 438, 146, 12]
                }
            ]
        };

        if (box_option && typeof box_option === "object") {
            box_myChart.setOption(box_option, true);
        };

        var dom2 = document.getElementById("box2");
        var box_myChart2 = echarts.init(dom2);

        var colors = ['#5793f3', '#d14a61', '#675bba'];
        var box_option2 = {
            color: colors,
            title: {
                text: '104年度',
                textStyle:{
                    fontSize: 14,
                    fontWeight: 900
                }
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'cross'
                }
            },
            grid: {
                right: '20%'
            },
            toolbox: {
                feature: {
                    dataView: {show: true, readOnly: false},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            legend: {
                data:['人數']
            },
            xAxis: [
                {
                    name:'年齡',
                    type: 'category',
                    axisTick: {
                        alignWithLabel: true
                    },
                    data: ['<20','20~30','30~40','40~50','50~60','60~70','70~80','80~90','>90']
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    name: '事故人數',
                    min: 0,
                    max: 10000,
                    position: 'left',
                    axisLine: {
                        lineStyle: {
                            color: colors[0]
                        }
                    },
                    axisLabel: {
                        formatter: '{value}'
                    }
                }
            ],
            series: [
                {
                    name:'男',
                    type:'bar',
                    data:[4680, 9444, 6707, 5613, 5577, 3196, 765, 247, 174]
                },
                {
                    name:'女',
                    type:'bar',
                    data:[1740, 4087, 2946, 2479, 2350, 1297, 431, 139, 14]
                }
            ]
        };

        if (box_option2 && typeof box_option2 === "object") {
            box_myChart2.setOption(box_option2, true);
        };

        var dom3 = document.getElementById("box3");
        var box_myChart3 = echarts.init(dom3);

        var colors = ['#5793f3', '#d14a61', '#675bba'];
        var box_option3 = {
            color: colors,
            title: {
                text: '105年度',
                textStyle:{
                    fontSize: 14,
                    fontWeight: 900
                }
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'cross'
                }
            },
            grid: {
                right: '20%'
            },
            toolbox: {
                feature: {
                    dataView: {show: true, readOnly: false},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            legend: {
                data:['人數']
            },
            xAxis: [
                {
                    name:'年齡',
                    type: 'category',
                    axisTick: {
                        alignWithLabel: true
                    },
                    data: ['<20','20~30','30~40','40~50','50~60','60~70','70~80','80~90','>90']
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    name: '事故人數',
                    min: 0,
                    max: 10000,
                    position: 'left',
                    axisLine: {
                        lineStyle: {
                            color: colors[0]
                        }
                    },
                    axisLabel: {
                        formatter: '{value}'
                    }
                }
            ],
            series: [
                {
                    name:'男',
                    type:'bar',
                    data:[4305, 10012, 7219, 5872, 5670, 3588, 848, 287, 932]
                },
                {
                    name:'女',
                    type:'bar',
                    data:[1568, 4406, 3035, 2657, 2306, 1476, 505, 160, 22]
                }
            ]
        };

        if (box_option3 && typeof box_option3 === "object") {
            box_myChart3.setOption(box_option3, true);
        };

        var dom4 = document.getElementById("box4");
        var box_myChart4 = echarts.init(dom4);

        var colors = ['#5793f3', '#d14a61', '#675bba'];
        var box_option4 = {
            color: colors,
            title: {
                text: '106年度',
                textStyle:{
                    fontSize: 14,
                    fontWeight: 900
                }
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'cross'
                }
            },
            grid: {
                right: '20%'
            },
            toolbox: {
                feature: {
                    dataView: {show: true, readOnly: false},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            legend: {
                data:['人數']
            },
            xAxis: [
                {
                    name:'年齡',
                    type: 'category',
                    axisTick: {
                        alignWithLabel: true
                    },
                    data: ['<20','20~30','30~40','40~50','50~60','60~70','70~80','80~90','>90']
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    name: '事故人數',
                    min: 0,
                    max: 10000,
                    position: 'left',
                    axisLine: {
                        lineStyle: {
                            color: colors[0]
                        }
                    },
                    axisLabel: {
                        formatter: '{value}'
                    }
                }
            ],
            series: [
                {
                    name:'男',
                    type:'bar',
                    data:[2725, 9344, 6212, 5313, 5323, 3697, 801, 276, 235]
                },
                {
                    name:'女',
                    type:'bar',
                    data:[992, 4049, 2751, 2393, 2258, 1611, 491, 164, 34]
                }
            ]
        };

        if (box_option4 && typeof box_option4 === "object") {
            box_myChart4.setOption(box_option4, true);
        };

    </script>
</body>

</html>